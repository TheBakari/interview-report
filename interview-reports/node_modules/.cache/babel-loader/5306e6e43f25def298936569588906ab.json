{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nikola\\\\Desktop\\\\interview-reports\\\\interview-reports\\\\src\\\\pages\\\\Wizard.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReportCommunicator from \"../services/ReportCommunicator\";\nimport CandidateCommunicator from \"../services/CandidateCommunicator\";\nimport CompanyCommunicator from \"../services/CompanyCommunicator\";\nimport { Row, Col, ProgressBar } from \"react-bootstrap\";\nimport WizardSteps from \"../components/wiz/WizardSteps\";\nimport WizSelect from \"../components/wiz/WizSelect\";\nimport WizCandidateCard from \"../components/wiz/WizCandidateCard\";\nimport WizCompanyCard from \"../components/wiz/WizCompanyCard\";\nimport WizReportForm from \"../components/wiz/WizReportForm\";\nimport WizSelectedInfo from \"../components/wiz/WizSelectedInfo\";\nimport { SESSION_EXPIRED } from \"../shared/constants\";\nimport styles from \"./Wizard.module.css\";\nimport ErrorDisplay from \"../components/ErrorDisplay\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultWizState = {\n  selectedCandidate: null,\n  selectedCompany: null,\n  currentStep: 0,\n  // currently active step, can already have input\n  nextStep: 0 // next step where no input was provided by user\n\n};\n\nconst wizReducer = (state, action) => {\n  if (action.type === \"SELECT_CANDIDATE\") {\n    if (state.selectedCandidate && state.selectedCandidate.id === action.payload.id) {\n      return { ...state,\n        selectedCandidate: null,\n        // deselect candidate\n        nextStep: 0\n      };\n    } else {\n      return { ...state,\n        selectedCandidate: action.payload,\n        nextStep: state.selectedCompany ? 2 : 1\n      };\n    }\n  }\n\n  if (action.type === \"SELECT_COMPANY\") {\n    if (state.selectedCompany && state.selectedCompany.id === action.payload.id) {\n      return { ...state,\n        selectedCompany: null,\n        nextStep: 1\n      };\n    } else {\n      return { ...state,\n        selectedCompany: action.payload,\n        nextStep: state.selectedCandidate ? 2 : 1\n      };\n    }\n  }\n\n  if (action.type === \"BACK_BTN_CLICK\") {\n    if (state.currentStep !== 0) return { ...state,\n      currentStep: state.currentStep - 1\n    };\n  }\n\n  if (action.type === \"NEXT_BTN_CLICK\") {\n    return { ...state,\n      currentStep: state.currentStep + 1\n    }; // no next btn in form\n  }\n\n  if (action.type === \"STEP_CLICK\") {\n    // change currentStep only if going back or going 1 step forward\n    if (state.nextStep >= action.step) {\n      return { ...state,\n        currentStep: action.step\n      };\n    }\n  }\n\n  return defaultWizState;\n};\n\nexport default function Wizard(props) {\n  _s();\n\n  const history = useHistory();\n  const [error, setError] = useState(\"\");\n  const [wizState, dispatchWizAction] = useReducer(wizReducer, defaultWizState);\n\n  const handleSelectCandidate = candidate => {\n    dispatchWizAction({\n      type: \"SELECT_CANDIDATE\",\n      payload: candidate\n    });\n  };\n\n  const handleSelectCompany = company => {\n    dispatchWizAction({\n      type: \"SELECT_COMPANY\",\n      payload: company\n    });\n  };\n\n  const handleBackBtnClick = () => {\n    dispatchWizAction({\n      type: \"BACK_BTN_CLICK\"\n    });\n  };\n\n  const handleNextBtnClick = () => {\n    dispatchWizAction({\n      type: \"NEXT_BTN_CLICK\"\n    });\n  };\n\n  const handleStepClick = step => {\n    dispatchWizAction({\n      type: \"STEP_CLICK\",\n      step: step\n    });\n  };\n\n  const handleFormSubmit = formInput => {\n    const {\n      interviewDate,\n      phase,\n      status,\n      note\n    } = formInput;\n    const selectedData = {\n      candidateId: wizState.selectedCandidate.id,\n      candidateName: wizState.selectedCandidate.name,\n      companyId: wizState.selectedCompany.id,\n      companyName: wizState.selectedCompany.name\n    };\n    const reportData = { ...selectedData,\n      interviewDate,\n      phase,\n      status,\n      note\n    };\n    console.log(\"reportData: \", reportData);\n    ReportCommunicator.save(reportData).then(response => console.log(response)).then(history.push(\"/admin\")).catch(error => {\n      if (error.message === SESSION_EXPIRED) props.onSessionExpired();\n      setError(error.message);\n    });\n  };\n\n  const sharedSelectProps = {\n    currentStep: wizState.currentStep,\n    onBackBtnClick: handleBackBtnClick,\n    onNextBtnClick: handleNextBtnClick,\n    onSessionExpired: props.onSessionExpired\n  };\n  if (error) return /*#__PURE__*/_jsxDEV(ErrorDisplay, {\n    message: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Row, {\n    className: \"mt-4  m-0\",\n    children: [/*#__PURE__*/_jsxDEV(Col, {\n      sm: 3,\n      lg: 2,\n      className: styles.stepsDiv,\n      children: [/*#__PURE__*/_jsxDEV(WizardSteps, {\n        currentStep: wizState.currentStep,\n        nextStep: wizState.nextStep,\n        onClick: handleStepClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center my-4\",\n        style: {\n          width: \"100%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(ProgressBar, {\n          max: \"3\",\n          now: wizState.currentStep + 1,\n          variant: \"dark\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(WizSelectedInfo, {\n        candidateName: wizState.selectedCandidate ? wizState.selectedCandidate.name : \"\",\n        companyName: wizState.selectedCompany ? wizState.selectedCompany.name : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Col, {\n      sm: 8,\n      className: styles.optionsDiv,\n      children: [wizState.currentStep === 0 && /*#__PURE__*/_jsxDEV(WizSelect, {\n        onSelectItem: handleSelectCandidate,\n        communicator: CandidateCommunicator,\n        ItemCard: WizCandidateCard,\n        selected: wizState.selectedCandidate,\n        ...sharedSelectProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this), wizState.currentStep === 1 && /*#__PURE__*/_jsxDEV(WizSelect, {\n        onSelectItem: handleSelectCompany,\n        communicator: CompanyCommunicator,\n        ItemCard: WizCompanyCard,\n        selected: wizState.selectedCompany,\n        ...sharedSelectProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this), wizState.currentStep === 2 && /*#__PURE__*/_jsxDEV(WizReportForm, {\n        onBackBtnClick: handleBackBtnClick,\n        onSubmit: handleFormSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Wizard, \"ZRHRzNFc/ggRMJ/a8Ptb5p/b5Ug=\", false, function () {\n  return [useHistory];\n});\n\n_c = Wizard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wizard\");","map":{"version":3,"sources":["C:/Users/Nikola/Desktop/interview-reports/interview-reports/src/pages/Wizard.jsx"],"names":["React","useReducer","useState","useHistory","ReportCommunicator","CandidateCommunicator","CompanyCommunicator","Row","Col","ProgressBar","WizardSteps","WizSelect","WizCandidateCard","WizCompanyCard","WizReportForm","WizSelectedInfo","SESSION_EXPIRED","styles","ErrorDisplay","defaultWizState","selectedCandidate","selectedCompany","currentStep","nextStep","wizReducer","state","action","type","id","payload","step","Wizard","props","history","error","setError","wizState","dispatchWizAction","handleSelectCandidate","candidate","handleSelectCompany","company","handleBackBtnClick","handleNextBtnClick","handleStepClick","handleFormSubmit","formInput","interviewDate","phase","status","note","selectedData","candidateId","candidateName","name","companyId","companyName","reportData","console","log","save","then","response","push","catch","message","onSessionExpired","sharedSelectProps","onBackBtnClick","onNextBtnClick","stepsDiv","width","optionsDiv"],"mappings":"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","sourcesContent":["import React, { useReducer, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ReportCommunicator from \"../services/ReportCommunicator\";\r\nimport CandidateCommunicator from \"../services/CandidateCommunicator\";\r\nimport CompanyCommunicator from \"../services/CompanyCommunicator\";\r\n\r\nimport { Row, Col, ProgressBar } from \"react-bootstrap\";\r\nimport WizardSteps from \"../components/wiz/WizardSteps\";\r\nimport WizSelect from \"../components/wiz/WizSelect\";\r\nimport WizCandidateCard from \"../components/wiz/WizCandidateCard\";\r\nimport WizCompanyCard from \"../components/wiz/WizCompanyCard\";\r\nimport WizReportForm from \"../components/wiz/WizReportForm\";\r\nimport WizSelectedInfo from \"../components/wiz/WizSelectedInfo\";\r\n\r\nimport { SESSION_EXPIRED } from \"../shared/constants\";\r\n\r\nimport styles from \"./Wizard.module.css\";\r\nimport ErrorDisplay from \"../components/ErrorDisplay\";\r\n\r\nconst defaultWizState = {\r\n  selectedCandidate: null,\r\n  selectedCompany: null,\r\n  currentStep: 0, // currently active step, can already have input\r\n  nextStep: 0, // next step where no input was provided by user\r\n};\r\n\r\nconst wizReducer = (state, action) => {\r\n  if (action.type === \"SELECT_CANDIDATE\") {\r\n    if (\r\n      state.selectedCandidate &&\r\n      state.selectedCandidate.id === action.payload.id\r\n    ) {\r\n      return {\r\n        ...state,\r\n        selectedCandidate: null, // deselect candidate\r\n        nextStep: 0,\r\n      };\r\n    } else {\r\n      return {\r\n        ...state,\r\n        selectedCandidate: action.payload,\r\n        nextStep: state.selectedCompany ? 2 : 1,\r\n      };\r\n    }\r\n  }\r\n  if (action.type === \"SELECT_COMPANY\") {\r\n    if (\r\n      state.selectedCompany &&\r\n      state.selectedCompany.id === action.payload.id\r\n    ) {\r\n      return {\r\n        ...state,\r\n        selectedCompany: null,\r\n        nextStep: 1,\r\n      };\r\n    } else {\r\n      return {\r\n        ...state,\r\n        selectedCompany: action.payload,\r\n        nextStep: state.selectedCandidate ? 2 : 1,\r\n      };\r\n    }\r\n  }\r\n  if (action.type === \"BACK_BTN_CLICK\") {\r\n    if (state.currentStep !== 0)\r\n      return { ...state, currentStep: state.currentStep - 1 };\r\n  }\r\n  if (action.type === \"NEXT_BTN_CLICK\") {\r\n    return { ...state, currentStep: state.currentStep + 1 }; // no next btn in form\r\n  }\r\n  if (action.type === \"STEP_CLICK\") {\r\n    // change currentStep only if going back or going 1 step forward\r\n    if (state.nextStep >= action.step) {\r\n      return { ...state, currentStep: action.step };\r\n    }\r\n  }\r\n  return defaultWizState;\r\n};\r\n\r\nexport default function Wizard(props) {\r\n  const history = useHistory();\r\n  const [error, setError] = useState(\"\");\r\n  const [wizState, dispatchWizAction] = useReducer(wizReducer, defaultWizState);\r\n\r\n  const handleSelectCandidate = (candidate) => {\r\n    dispatchWizAction({ type: \"SELECT_CANDIDATE\", payload: candidate });\r\n  };\r\n\r\n  const handleSelectCompany = (company) => {\r\n    dispatchWizAction({ type: \"SELECT_COMPANY\", payload: company });\r\n  };\r\n\r\n  const handleBackBtnClick = () => {\r\n    dispatchWizAction({ type: \"BACK_BTN_CLICK\" });\r\n  };\r\n\r\n  const handleNextBtnClick = () => {\r\n    dispatchWizAction({ type: \"NEXT_BTN_CLICK\" });\r\n  };\r\n\r\n  const handleStepClick = (step) => {\r\n    dispatchWizAction({ type: \"STEP_CLICK\", step: step });\r\n  };\r\n\r\n  const handleFormSubmit = (formInput) => {\r\n    const { interviewDate, phase, status, note } = formInput;\r\n    const selectedData = {\r\n      candidateId: wizState.selectedCandidate.id,\r\n      candidateName: wizState.selectedCandidate.name,\r\n      companyId: wizState.selectedCompany.id,\r\n      companyName: wizState.selectedCompany.name,\r\n    };\r\n    const reportData = { ...selectedData, interviewDate, phase, status, note };\r\n    console.log(\"reportData: \", reportData);\r\n    ReportCommunicator.save(reportData)\r\n      .then((response) => console.log(response))\r\n      .then(history.push(\"/admin\"))\r\n      .catch((error) => {\r\n        if (error.message === SESSION_EXPIRED) props.onSessionExpired();\r\n        setError(error.message);\r\n      });\r\n  };\r\n\r\n  const sharedSelectProps = {\r\n    currentStep: wizState.currentStep,\r\n    onBackBtnClick: handleBackBtnClick,\r\n    onNextBtnClick: handleNextBtnClick,\r\n    onSessionExpired: props.onSessionExpired,\r\n  };\r\n\r\n  if (error) return <ErrorDisplay message={error} />;\r\n\r\n  return (\r\n    <Row className=\"mt-4  m-0\">\r\n      <Col sm={3} lg={2} className={styles.stepsDiv}>\r\n        <WizardSteps\r\n          currentStep={wizState.currentStep}\r\n          nextStep={wizState.nextStep}\r\n          onClick={handleStepClick}\r\n        />\r\n        <div className=\"text-center my-4\" style={{width: \"100%\"}}>\r\n          <ProgressBar max=\"3\" now={wizState.currentStep + 1} variant=\"dark\"/>\r\n        </div>\r\n        <WizSelectedInfo\r\n          candidateName={\r\n            wizState.selectedCandidate ? wizState.selectedCandidate.name : \"\"\r\n          }\r\n          companyName={\r\n            wizState.selectedCompany ? wizState.selectedCompany.name : \"\"\r\n          }\r\n        />\r\n      </Col>\r\n      <Col sm={8} className={styles.optionsDiv}>\r\n        {wizState.currentStep === 0 && (\r\n          <WizSelect\r\n            onSelectItem={handleSelectCandidate}\r\n            communicator={CandidateCommunicator}\r\n            ItemCard={WizCandidateCard}\r\n            selected={wizState.selectedCandidate}\r\n            {...sharedSelectProps}\r\n          />\r\n        )}\r\n        {wizState.currentStep === 1 && (\r\n          <WizSelect\r\n            onSelectItem={handleSelectCompany}\r\n            communicator={CompanyCommunicator}\r\n            ItemCard={WizCompanyCard}\r\n            selected={wizState.selectedCompany}\r\n            {...sharedSelectProps}\r\n          />\r\n        )}\r\n        {wizState.currentStep === 2 && (\r\n          <WizReportForm\r\n            onBackBtnClick={handleBackBtnClick}\r\n            onSubmit={handleFormSubmit}\r\n          />\r\n        )}\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}