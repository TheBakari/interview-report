{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nikola\\\\Desktop\\\\interview-reports\\\\interview-reports\\\\src\\\\pages\\\\AdminPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport ErrorDisplay from \"../components/ErrorDisplay\";\nimport SearchBar from \"../components/SearchBar\";\nimport { Table } from \"../components/Table\";\nimport ReportCommunicator from \"../services/ReportCommunicator\";\nimport { SESSION_EXPIRED } from \"../shared/constants\";\nimport styles from \"./AdminPage.module.css\";\nimport LoaderRipple from \"../components/UI/LoaderRipple\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminPage(props) {\n  _s();\n\n  const [reports, setReports] = useState([]);\n  const [searchText, setSearchText] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\"); // error as a string with the error msg\n\n  const {\n    onSessionExpired\n  } = props;\n\n  const getReports = () => {\n    ReportCommunicator.getAll().then(data => {\n      setReports(data);\n    }).catch(error => {\n      console.log(error);\n      if (error.message === SESSION_EXPIRED) onSessionExpired();\n      setError(error.message);\n    }).finally(() => {\n      setLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    getReports();\n  }, []);\n\n  const handleSearch = searchInput => {\n    setSearchText(searchInput);\n  };\n\n  const deleteReport = id => {\n    // setReports(reports.filter((r) => r.id !== id));\n    // TODO: Pitaj Nikolu da li ovo valja!!!\n    ReportCommunicator.delete(id).then(response => {\n      console.log(response);\n      getReports();\n    }).catch(error => {\n      setError(error.message);\n    });\n  };\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(ErrorDisplay, {\n      message: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (loading) return /*#__PURE__*/_jsxDEV(LoaderRipple, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.tableContainer,\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      reports: reports,\n      filterText: searchText,\n      onDelete: deleteReport,\n      admin: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AdminPage, \"Uib6FI3czDMiXMeBikGVsAyyv8M=\");\n\n_c = AdminPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminPage\");","map":{"version":3,"sources":["C:/Users/Nikola/Desktop/interview-reports/interview-reports/src/pages/AdminPage.jsx"],"names":["React","useEffect","useState","ErrorDisplay","SearchBar","Table","ReportCommunicator","SESSION_EXPIRED","styles","LoaderRipple","AdminPage","props","reports","setReports","searchText","setSearchText","loading","setLoading","error","setError","onSessionExpired","getReports","getAll","then","data","catch","console","log","message","finally","handleSearch","searchInput","deleteReport","id","delete","response","tableContainer"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,KAAT,QAAsB,qBAAtB;AAEA,OAAOC,kBAAP,MAA+B,gCAA/B;AACA,SAASC,eAAT,QAAgC,qBAAhC;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,YAAP,MAAyB,+BAAzB;;AAEA,eAAe,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA;;AACvC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACgB,KAAD,EAAQC,QAAR,IAAoBjB,QAAQ,CAAC,EAAD,CAAlC,CAJuC,CAIC;;AAExC,QAAM;AAAEkB,IAAAA;AAAF,MAAuBT,KAA7B;;AACA,QAAMU,UAAU,GAAG,MAAM;AACvBf,IAAAA,kBAAkB,CAACgB,MAAnB,GACGC,IADH,CACSC,IAAD,IAAU;AACdX,MAAAA,UAAU,CAACW,IAAD,CAAV;AACD,KAHH,EAIGC,KAJH,CAIUP,KAAD,IAAW;AAChBQ,MAAAA,OAAO,CAACC,GAAR,CAAYT,KAAZ;AACA,UAAIA,KAAK,CAACU,OAAN,KAAkBrB,eAAtB,EAAuCa,gBAAgB;AACvDD,MAAAA,QAAQ,CAACD,KAAK,CAACU,OAAP,CAAR;AACD,KARH,EASGC,OATH,CASW,MAAM;AACbZ,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAXH;AAYD,GAbD;;AAeAhB,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,UAAU;AACX,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMS,YAAY,GAAIC,WAAD,IAAiB;AACpChB,IAAAA,aAAa,CAACgB,WAAD,CAAb;AACD,GAFD;;AAGA,QAAMC,YAAY,GAAIC,EAAD,IAAQ;AAC3B;AACA;AACA3B,IAAAA,kBAAkB,CAAC4B,MAAnB,CAA0BD,EAA1B,EACGV,IADH,CACSY,QAAD,IAAc;AAClBT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;AACAd,MAAAA,UAAU;AACX,KAJH,EAKGI,KALH,CAKUP,KAAD,IAAW;AAChBC,MAAAA,QAAQ,CAACD,KAAK,CAACU,OAAP,CAAR;AACD,KAPH;AAQD,GAXD;;AAaA,MAAIV,KAAJ,EAAW;AACT,wBAAO,QAAC,YAAD;AAAc,MAAA,OAAO,EAAEA;AAAvB;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AACD,MAAIF,OAAJ,EAAa,oBAAO,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,UAAP;AACb,sBACE;AAAK,IAAA,SAAS,EAAER,MAAM,CAAC4B,cAAvB;AAAA,4BACE,QAAC,SAAD;AAAW,MAAA,QAAQ,EAAEN;AAArB;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,KAAD;AACE,MAAA,OAAO,EAAElB,OADX;AAEE,MAAA,UAAU,EAAEE,UAFd;AAGE,MAAA,QAAQ,EAAEkB,YAHZ;AAIE,MAAA,KAAK,EAAE;AAJT;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAWD;;GAzDuBtB,S;;KAAAA,S","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport ErrorDisplay from \"../components/ErrorDisplay\";\r\nimport SearchBar from \"../components/SearchBar\";\r\nimport { Table } from \"../components/Table\";\r\n\r\nimport ReportCommunicator from \"../services/ReportCommunicator\";\r\nimport { SESSION_EXPIRED } from \"../shared/constants\";\r\nimport styles from \"./AdminPage.module.css\";\r\nimport LoaderRipple from \"../components/UI/LoaderRipple\";\r\n\r\nexport default function AdminPage(props) {\r\n  const [reports, setReports] = useState([]);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\"); // error as a string with the error msg\r\n\r\n  const { onSessionExpired } = props;\r\n  const getReports = () => {\r\n    ReportCommunicator.getAll()\r\n      .then((data) => {\r\n        setReports(data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        if (error.message === SESSION_EXPIRED) onSessionExpired();\r\n        setError(error.message);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getReports();\r\n  }, []);\r\n\r\n  const handleSearch = (searchInput) => {\r\n    setSearchText(searchInput);\r\n  };\r\n  const deleteReport = (id) => {\r\n    // setReports(reports.filter((r) => r.id !== id));\r\n    // TODO: Pitaj Nikolu da li ovo valja!!!\r\n    ReportCommunicator.delete(id)\r\n      .then((response) => {\r\n        console.log(response);\r\n        getReports();\r\n      })\r\n      .catch((error) => {\r\n        setError(error.message);\r\n      });\r\n  };\r\n  \r\n  if (error) {\r\n    return <ErrorDisplay message={error} />;\r\n  }\r\n  if (loading) return <LoaderRipple />;\r\n  return (\r\n    <div className={styles.tableContainer}>\r\n      <SearchBar onSearch={handleSearch} />\r\n      <Table\r\n        reports={reports}\r\n        filterText={searchText}\r\n        onDelete={deleteReport}\r\n        admin={true}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}